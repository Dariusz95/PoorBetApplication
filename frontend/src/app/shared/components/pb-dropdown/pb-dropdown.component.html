<div #trigger="cdkOverlayOrigin" cdkOverlayOrigin (click)="toggleDropdown()">
  <ng-content select="[dropdownLabel]"></ng-content>
  <i [class.rotate]="isOpen()" class="bi bi-caret-down-fill"></i>
</div>

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="origin() || trigger"
  [cdkConnectedOverlayOpen]="isOpen()"
  [cdkConnectedOverlayPositions]="positions()"
  (backdropClick)="closeDropdown()"
  (detach)="closeDropdown()"
>
  <div class="dropdown-panel" [@dropdownAnimation]>
    <ul class="dropdown-list">
      <li
        *ngFor="let option of options()"
        (click)="selectOption(option)"
        class="dropdown-list-item"
      >
        @if(optionTemplate()) {
        <ng-container
          *ngTemplateOutlet="optionTemplate()!; context: { $implicit: option }"
        ></ng-container>
        }@else {
        {{ option.label | transloco }}
        }
      </li>
    </ul>
  </div>
</ng-template>
